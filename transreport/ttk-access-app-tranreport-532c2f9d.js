webpackJsonp([1,3],{"391":function(module,exports,__webpack_require__){(function(global,process){function inspect(obj,opts){var ctx={"seen":[],"stylize":stylizeNoColor};return arguments.length>=3&&(ctx.depth=arguments[2]),arguments.length>=4&&(ctx.colors=arguments[3]),isBoolean(opts)?ctx.showHidden=opts:opts&&exports._extend(ctx,opts),isUndefined(ctx.showHidden)&&(ctx.showHidden=!1),isUndefined(ctx.depth)&&(ctx.depth=2),isUndefined(ctx.colors)&&(ctx.colors=!1),isUndefined(ctx.customInspect)&&(ctx.customInspect=!0),ctx.colors&&(ctx.stylize=stylizeWithColor),formatValue(ctx,obj,ctx.depth)}function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];return style?"\x1b["+inspect.colors[style][0]+"m"+str+"\x1b["+inspect.colors[style][1]+"m":str}function stylizeNoColor(str,styleType){return str}function arrayToHash(array){var hash={};return array.forEach(function(val,idx){hash[val]=!0}),hash}function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&(!value.constructor||value.constructor.prototype!==value)){var ret=value.inspect(recurseTimes,ctx);return isString(ret)||(ret=formatValue(ctx,ret,recurseTimes)),ret}var primitive=formatPrimitive(ctx,value);if(primitive)return primitive;var keys=Object.keys(value),visibleKeys=arrayToHash(keys);if(ctx.showHidden&&(keys=Object.getOwnPropertyNames(value)),isError(value)&&(keys.indexOf("message")>=0||keys.indexOf("description")>=0))return formatError(value);if(0===keys.length){if(isFunction(value)){var name=value.name?": "+value.name:"";return ctx.stylize("[Function"+name+"]","special")}if(isRegExp(value))return ctx.stylize(RegExp.prototype.toString.call(value),"regexp");if(isDate(value))return ctx.stylize(Date.prototype.toString.call(value),"date");if(isError(value))return formatError(value)}var base="",array=!1,braces=["{","}"];if(isArray(value)&&(array=!0,braces=["[","]"]),isFunction(value)){var n=value.name?": "+value.name:"";base=" [Function"+n+"]"}if(isRegExp(value)&&(base=" "+RegExp.prototype.toString.call(value)),isDate(value)&&(base=" "+Date.prototype.toUTCString.call(value)),isError(value)&&(base=" "+formatError(value)),0===keys.length&&(!array||0==value.length))return braces[0]+base+braces[1];if(recurseTimes<0)return isRegExp(value)?ctx.stylize(RegExp.prototype.toString.call(value),"regexp"):ctx.stylize("[Object]","special");ctx.seen.push(value);var output;return output=array?formatArray(ctx,value,recurseTimes,visibleKeys,keys):keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array)}),ctx.seen.pop(),reduceToSingleString(output,base,braces)}function formatPrimitive(ctx,value){if(isUndefined(value))return ctx.stylize("undefined","undefined");if(isString(value)){var simple="'"+JSON.stringify(value).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ctx.stylize(simple,"string")}return isNumber(value)?ctx.stylize(""+value,"number"):isBoolean(value)?ctx.stylize(""+value,"boolean"):isNull(value)?ctx.stylize("null","null"):void 0}function formatError(value){return"["+Error.prototype.toString.call(value)+"]"}function formatArray(ctx,value,recurseTimes,visibleKeys,keys){for(var output=[],i=0,l=value.length;i<l;++i)hasOwnProperty(value,String(i))?output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),!0)):output.push("");return keys.forEach(function(key){key.match(/^\d+$/)||output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,!0))}),output}function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;if(desc=Object.getOwnPropertyDescriptor(value,key)||{"value":value[key]},desc.get?str=desc.set?ctx.stylize("[Getter/Setter]","special"):ctx.stylize("[Getter]","special"):desc.set&&(str=ctx.stylize("[Setter]","special")),hasOwnProperty(visibleKeys,key)||(name="["+key+"]"),str||(ctx.seen.indexOf(desc.value)<0?(str=isNull(recurseTimes)?formatValue(ctx,desc.value,null):formatValue(ctx,desc.value,recurseTimes-1),str.indexOf("\n")>-1&&(str=array?str.split("\n").map(function(line){return"  "+line}).join("\n").substr(2):"\n"+str.split("\n").map(function(line){return"   "+line}).join("\n"))):str=ctx.stylize("[Circular]","special")),isUndefined(name)){if(array&&key.match(/^\d+$/))return str;name=JSON.stringify(""+key),name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(name=name.substr(1,name.length-2),name=ctx.stylize(name,"name")):(name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),name=ctx.stylize(name,"string"))}return name+": "+str}function reduceToSingleString(output,base,braces){var numLinesEst=0,length=output.reduce(function(prev,cur){return numLinesEst++,cur.indexOf("\n")>=0&&numLinesEst++,prev+cur.replace(/\u001b\[\d\d?m/g,"").length+1},0);return length>60?braces[0]+(""===base?"":base+"\n ")+" "+output.join(",\n  ")+" "+braces[1]:braces[0]+base+" "+output.join(", ")+" "+braces[1]}function isArray(ar){return Array.isArray(ar)}function isBoolean(arg){return"boolean"==typeof arg}function isNull(arg){return null===arg}function isNullOrUndefined(arg){return null==arg}function isNumber(arg){return"number"==typeof arg}function isString(arg){return"string"==typeof arg}function isSymbol(arg){return"symbol"==typeof arg}function isUndefined(arg){return void 0===arg}function isRegExp(re){return isObject(re)&&"[object RegExp]"===objectToString(re)}function isObject(arg){return"object"==typeof arg&&null!==arg}function isDate(d){return isObject(d)&&"[object Date]"===objectToString(d)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(arg){return"function"==typeof arg}function isPrimitive(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||"undefined"==typeof arg}function objectToString(o){return Object.prototype.toString.call(o)}function pad(n){return n<10?"0"+n.toString(10):n.toString(10)}function timestamp(){var d=new Date,time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(":");return[d.getDate(),months[d.getMonth()],time].join(" ")}function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){for(var objects=[],i=0;i<arguments.length;i++)objects.push(inspect(arguments[i]));return objects.join(" ")}for(var i=1,args=arguments,len=args.length,str=String(f).replace(formatRegExp,function(x){if("%%"===x)return"%";if(i>=len)return x;switch(x){case"%s":return String(args[i++]);case"%d":return Number(args[i++]);case"%j":try{return JSON.stringify(args[i++])}catch(_){return"[Circular]"}default:return x}}),x=args[i];i<len;x=args[++i])str+=isNull(x)||!isObject(x)?" "+x:" "+inspect(x);return str},exports.deprecate=function(fn,msg){function deprecated(){if(!warned){if(process.throwDeprecation)throw new Error(msg);process.traceDeprecation?console.trace(msg):console.error(msg),warned=!0}return fn.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(fn,msg).apply(this,arguments)};if(process.noDeprecation===!0)return fn;var warned=!1;return deprecated};var debugEnviron,debugs={};exports.debuglog=function(set){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),set=set.toUpperCase(),!debugs[set])if(new RegExp("\\b"+set+"\\b","i").test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error("%s %d: %s",set,pid,msg)}}else debugs[set]=function(){};return debugs[set]},exports.inspect=inspect,inspect.colors={"bold":[1,22],"italic":[3,23],"underline":[4,24],"inverse":[7,27],"white":[37,39],"grey":[90,39],"black":[30,39],"blue":[34,39],"cyan":[36,39],"green":[32,39],"magenta":[35,39],"red":[31,39],"yellow":[33,39]},inspect.styles={"special":"cyan","number":"yellow","boolean":"yellow","undefined":"grey","null":"bold","string":"green","date":"magenta","regexp":"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=__webpack_require__(941);var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){console.log("%s - %s",timestamp(),exports.format.apply(exports,arguments))},exports.inherits=__webpack_require__(940),exports._extend=function(origin,add){if(!add||!isObject(add))return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}}).call(exports,function(){return this}(),__webpack_require__(336))},"704":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaAction=new _edfMetaEngine.action(option),extendAction=_extend2["default"].actionCreator((0,_extends3["default"])({},option,{"metaAction":metaAction})),o=new action((0,_extends3["default"])({},option,{"metaAction":metaAction,"extendAction":extendAction})),ret=(0,_extends3["default"])({},metaAction,extendAction.gridAction,o);return metaAction.config({"metaHandlers":ret}),ret}Object.defineProperty(exports,"__esModule",{"value":!0});var _typeof2=__webpack_require__(63),_typeof3=_interopRequireDefault(_typeof2),_extends2=__webpack_require__(3),_extends3=_interopRequireDefault(_extends2),_toConsumableArray2=__webpack_require__(93),_toConsumableArray3=_interopRequireDefault(_toConsumableArray2),_regenerator=__webpack_require__(181),_regenerator2=_interopRequireDefault(_regenerator),_css=__webpack_require__(173),_message=__webpack_require__(172),_message2=_interopRequireDefault(_message),_asyncToGenerator2=__webpack_require__(179),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=__webpack_require__(11),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _react=__webpack_require__(2),_react2=_interopRequireDefault(_react),_immutable=__webpack_require__(23),_edfMetaEngine=__webpack_require__(53),_edfComponent=__webpack_require__(118),_extend=__webpack_require__(711),_extend2=_interopRequireDefault(_extend),_config=__webpack_require__(225),_config2=_interopRequireDefault(_config),_city=__webpack_require__(709),_renderColumns=__webpack_require__(713),_renderColumns2=_interopRequireDefault(_renderColumns),_utils=__webpack_require__(22),_util=__webpack_require__(391),action=function(){function action(option){var _this=this;(0,_classCallCheck3["default"])(this,action),this.onInit=function(){var _ref=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee(_ref2){var addEventListener,response,paramExternalDto,url1,curcontext,vatTaxpayerNum,accountingStandards,urlSearch,urlData,res,reduceArr,_reduceArr,_res,component=_ref2.component,injections=_ref2.injections;return _regenerator2["default"].wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(_this.extendAction.gridAction.onInit({"component":component,"injections":injections}),_this.component=component,_this.injections=injections,injections.reduce("init"),addEventListener=_this.component.props.addEventListener,response=void 0,paramExternalDto={},url1="http://127.0.0.1:8001/#/edfx-app-root/ttk-access-app-tranreport?gdslxDm=1&kjzdzzDm=2000020001&zlbsxlDm=ZL1001003&bbbsqDm=04&sssqQ=2017-04-01&sssqZ=2017-4-30&nsrsbh=91199106726456657C&nsrmc=%E8%8D%80%E5%BD%A7%E9%A2%84%E7%BD%AE%E5%8C%97%E4%BA%AC%E5%9C%B0%E5%8C%BA%E4%BC%81%E4%B8%9A%E5%B9%B4%E6%8A%A5&zgswskfjDm=11111&djxh=10111501210060998368",curcontext=_this.metaAction.context,vatTaxpayerNum=void 0,accountingStandards=void 0,urlSearch=location&&location.search.indexOf("?")>=0?location.search:location&&location.hash.indexOf("?")>=0?location.hash:"?",urlData=_this.urlParse(decodeURI(urlSearch)),"undefined"!=typeof urlData["tmp_code"]&&(urlData["code"]=urlData["tmp_code"]),paramExternalDto=urlData,urlData.sourceType){_context.next=22;break}return _context.next=15,_this.webapi.tranreport.oauthAuthentication(urlData);case 15:res=_context.sent,reduceArr=[],res&&(reduceArr.push({"path":"data.orgDto","value":res.orgDto}),reduceArr.push({"path":"data.paramExternalDto","value":res.paramExternalDto}),reduceArr.push({"path":"data.tokenData","value":res.token}),paramExternalDto=res.paramExternalDto),reduceArr.push({"path":"data.other.allVisible","value":!0}),_this.injections.reduce("updateArr",reduceArr),_context.next=37;break;case 22:if(_reduceArr=[],urlData.nsrsbh&&"undefined"!=urlData.nsrsbh){_context.next=26;break}return _message2["default"].warning("\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7\u4e3a\u7a7a",5),_context.abrupt("return");case 26:if(urlData.djxh){_context.next=30;break}_this.metaAction.sf("data.other.allVisible",!0),_context.next=37;break;case 30:return _context.next=32,_this.webapi.tranreport.getOrgAndToken(urlData);case 32:_res=_context.sent,_res&&(_reduceArr=[{"path":"data.orgDto","value":_res.orgDto},{"path":"data.paramExternalDto","value":_res.paramExternalDto},{"path":"data.tokenData","value":_res.token}],paramExternalDto=_res.paramExternalDto),_edfComponent.LoadingMask.hide(),_reduceArr.push({"path":"data.other.allVisible","value":!0}),_this.injections.reduce("updateArr",_reduceArr);case 37:_this.load(paramExternalDto);case 38:case"end":return _context.stop()}},_callee,_this)}));return function(_x){return _ref.apply(this,arguments)}}(),this.load=function(){var _ref3=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee2(urlData,response){var reduceArr,rptTitleList,showRptStates,res,currentRptName,rptTitle;return _regenerator2["default"].wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return reduceArr=[],rptTitleList=_this.metaAction.gf("data.source.rptTitleList"),_this.injections.reduce("load",urlData,rptTitleList.toJS()),showRptStates=_this.setShowRptStates(urlData.zgswskfjDm,urlData.bbbsqDm,urlData.zlbsxlDm),showRptStates&&(reduceArr=[].concat((0,_toConsumableArray3["default"])(reduceArr),[{"path":"data.other.balancesheetStatus","value":showRptStates.balancesheetStatus},{"path":"data.other.profitstatementStatus","value":showRptStates.profitstatementStatus},{"path":"data.other.cashflowstatementStatus","value":showRptStates.cashflowstatementStatus}])),_this.injections.reduce("updateArr",reduceArr),_context2.next=7,_this.webapi.tranreport.getReportJson(urlData);case 7:res=_context2.sent,res&&(!res.body||res.body.zcfzbBody||res.body.lrbBody||res.body.xjllbBody)&&(currentRptName=_this.metaAction.gf("data.other.rpttype"),rptTitle=_this.metaAction.gf("data.rptTitle"),reduceArr.push({"path":"data.other.editStatus","value":!1}),_this.injections.reduce("setSourceRpt",res,currentRptName,rptTitle&&rptTitle.toJS()[currentRptName]),reduceArr=[].concat((0,_toConsumableArray3["default"])(reduceArr),[{"path":"data.balancesheetData","value":void 0},{"path":"data.cashflowstatementData","value":void 0},{"path":"data.profitstatementData","value":void 0},{"path":"data.btnState.updateState","value":!1},{"path":"data.btnState.nextState","value":!1}]),_this.injections.reduce("updateArr",reduceArr)),setTimeout(function(){_this.onResize()},20);case 10:case"end":return _context2.stop()}},_callee2,_this)}));return function(_x2,_x3){return _ref3.apply(this,arguments)}}(),this.componentWillUnmount=function(){window.removeEventListener?(window.removeEventListener("resize",_this.onResize,!1),document.body.removeEventListener("keydown",_this.bodyKeydownEvent,!1)):window.detachEvent?(window.detachEvent("onresize",_this.onResize),document.body.detachEvent("onkeydown",_this.bodyKeydownEvent)):window.onresize=void 0},this.componentDidMount=function(){window.addEventListener?(window.addEventListener("resize",_this.onResize,!1),document.body.addEventListener("keydown",_this.bodyKeydownEvent,!1)):window.attachEvent?(window.attachEvent("onresize",_this.onResize),document.body.attachEvent("onkeydown",_this.bodyKeydownEvent)):window.onresize=_this.onResize},this.bodyKeydownEvent=function(e){var projectadjustbody=document.getElementById("ttk-access-app-tranreport-projectadjust"),tranreportbody=document.getElementById("ttk-access-app-tranreport"),inputs=_this.getElementsByClassName("ant-input mk-input-number ttk-access-app-tranreport-step2content-tableCellInput"),eve=e||window,objEle=eve.target||eve.srcElement;if(!projectadjustbody&&tranreportbody&&inputs)if(inputs.length<1&&eve)_this.bodyhandleKeyDown({"event":eve});else{var index=$(inputs).index(objEle);inputs[index]!=document.activeElement&&_this.bodyhandleKeyDown({"event":eve})}},this.bodyhandleKeyDown=function(e){if(e&&e.event){var keydown=e&&e.event;"keydown"===keydown.type&&8!=keydown.keyCode||(window.event.cancelBubble=!0,window.event.returnValue=!1,keydown.preventDefault&&keydown.preventDefault(),keydown.stopPropagation&&keydown.stopPropagation())}},this.getElementsByClassName=function(className){if(document.getElementsByClassName)return document.getElementsByClassName(className);for(var results=[],elems=document.getElementsByTagName("input"),i=0,len=elems.length;i<len;i++)elems[i].className.indexOf(className)!=-1&&(results[results.length]=elems[i]);return results},this.onResize=function(e){var keyRandomTab=Math.floor(1e4*Math.random());_this.keyRandomTab=keyRandomTab,setTimeout(function(){keyRandomTab==_this.keyRandomTab&&_this.getTableScroll("ttk-access-app-tranreport-step2content-content","ant-table-thead",0,"ant-table-body","data.tableOption",e)},200)},this.getTableScroll=function(contaienr,head,num,target,path,e){try{var tableCon=document.getElementsByClassName(contaienr)[0];if(!tableCon){if(e)return;return void setTimeout(function(){_this.getTableScroll(contaienr,head,num,target,path)},500)}var header=tableCon.getElementsByClassName(head)[0],body=tableCon.getElementsByClassName(target)[0].getElementsByTagName("table")[0],pre=_this.metaAction.gf(path).toJS(),y=tableCon.offsetHeight-header.offsetHeight-num,bodyHeight=body.offsetHeight;if(bodyHeight>y&&y!=pre.y)_this.metaAction.sf(path,(0,_immutable.fromJS)((0,_extends3["default"])({},pre,{"y":y})));else{if(!(bodyHeight<y&&null!=pre.y))return!1;_this.metaAction.sf(path,(0,_immutable.fromJS)((0,_extends3["default"])({},pre,{"y":null})))}}catch(err){console.log(err)}},this.urlParse=function(url){var arr=[],obj={};if(url.indexOf("?")!=-1){var parseStr=url.split("?")[1];if(parseStr.indexOf("&")!=-1){arr=parseStr.split("&");for(var i=0;i<arr.length;i++)obj[arr[i].split("=")[0]]=arr[i].split("=")[1]}else obj[parseStr.split("=")[0]]=parseStr.split("=")[1]}return obj},this.selectLocalRptClick=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee3(){var res,reduceArr,isMutilSelct,currentRptName,balancesheetData,cashflowstatementData,profitstatementData,rptTitle;return _regenerator2["default"].wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_this.metaAction.gf("data.btnState.updateState")){_context3.next=3;break}return _message2["default"].warning("\u8bf7\u81f3\u5c11\u9009\u62e9\u4e00\u4e2a\u8d22\u52a1\u62a5\u8868",5),_context3.abrupt("return");case 3:return _context3.next=5,_this.webapi.tranreport.importDataSource(_this.getParams("importDataSource"));case 5:res=_context3.sent,res&&(reduceArr=[],isMutilSelct=0,currentRptName=void 0,balancesheetData="balanceSheetRpt",cashflowstatementData=_this.metaAction.gf("data.cashflowstatementData"),profitstatementData=_this.metaAction.gf("data.profitstatementData"),balancesheetData&&(isMutilSelct++,currentRptName="balanceSheetRpt",_hmt&&_hmt.push(["_trackEvent","\u8d22\u52a1","\u62a5\u8868\u8f6c\u6362","\u9009\u62e9\u6587\u4ef6\u662f\u201c\u8d44\u4ea7\u8d1f\u503a\u8868\u201d\u8f6c\u4e3a\u5c40\u7aef\u683c\u5f0f"])),profitstatementData&&(isMutilSelct++,currentRptName="profitStatementRpt",_hmt&&_hmt.push(["_trackEvent","\u8d22\u52a1","\u62a5\u8868\u8f6c\u6362","\u9009\u62e9\u6587\u4ef6\u662f\u201c\u5229\u6da6\u8868\u201d\u8f6c\u4e3a\u5c40\u7aef\u683c\u5f0f"])),cashflowstatementData&&(isMutilSelct++,currentRptName="cashflowStatementRpt",_hmt&&_hmt.push(["_trackEvent","\u8d22\u52a1","\u62a5\u8868\u8f6c\u6362","\u9009\u62e9\u6587\u4ef6\u662f\u201c\u73b0\u91d1\u6d41\u91cf\u8868\u201d\u8f6c\u4e3a\u5c40\u7aef\u683c\u5f0f"])),isMutilSelct>1&&(currentRptName=balancesheetData?"balanceSheetRpt":"profitStatementRpt"),reduceArr.push({"path":"data.other.rpttype","value":currentRptName}),rptTitle=_this.metaAction.gf("data.rptTitle"),reduceArr.push({"path":"data.other.editStatus","value":!1}),_this.injections.reduce("setSourceRpt",res,currentRptName,rptTitle&&rptTitle.toJS()[currentRptName]),reduceArr=[].concat((0,_toConsumableArray3["default"])(reduceArr),[{"path":"data.btnState.updateState","value":!1},{"path":"data.btnState.nextState","value":!1},{"path":"data.balancesheetData","value":void 0},{"path":"data.cashflowstatementData","value":void 0},{"path":"data.profitstatementData","value":void 0},{"path":"data.step.step2Visible","value":!0},{"path":"data.step.step1Visible","value":!1}]),res.needMatching?_this.nextResponseWarning(_this.getMessages(_this.metaAction.gf("data.btnState.nextState"))):_message2["default"].success("\u8f6c\u4e3a\u5c40\u7aef\u683c\u5f0f\u6210\u529f",5),_this.injections.reduce("updateArr",reduceArr));case 7:case"end":return _context3.stop()}},_callee3,_this)})),this.nextClick=function(){var reduceArr=[{"path":"data.step.step2Visible","value":!0},{"path":"data.step.step1Visible","value":!1}];_this.injections.reduce("updateArr",reduceArr)},this.getParams=function(type){var params={},urlData=_this.metaAction.gf("data.urlData");return"init"==type?params={"name":urlData.get("nsrmc"),"accountingStandards":urlData.get("kjzdzzDm"),"enabledYear":"2017","enabledMonth":"03","vatTaxpayer":urlData.get("zlbsxlDm"),"vatTaxpayerNum":urlData.get("nsrsbh"),"registeredProvincial":urlData.get("nsrsbh").substr(1,2)+"0000","registeredCity":urlData.get("nsrsbh").substr(1,4)+"00","registeredCounty":urlData.get("nsrsbh").substr(1,4)+"00"}:"importDataSource"==type?(params.analysisInputParams=[],params.calcBalanceSheet=!!_this.metaAction.gf("data.balancesheetData"),params.calcProfitStatement=!!_this.metaAction.gf("data.profitstatementData"),params.calcCashFlowStatement=!!_this.metaAction.gf("data.cashflowstatementData"),_this.metaAction.gf("data.balancesheetData"),urlData&&(params.externalParam=_this.metaAction.gf("data.urlData").toJS()),params.analysisInputParams=_this.setRptList(params.analysisInputParams,"balancesheet",urlData.get("nsrsbh")),params.analysisInputParams=_this.setRptList(params.analysisInputParams,"profitstatement",urlData.get("nsrsbh")),params.analysisInputParams=_this.setRptList(params.analysisInputParams,"cashflowstatement",urlData.get("nsrsbh")),params):void 0},this.setRptList=function(params,name,nsrsbh){return _this.metaAction.gf("data."+name+"Data")&&params.push({"fieldId":_this.metaAction.gf("data."+name+"Data.id"),"fieldName":name,"flag":"balancesheet"==name?1:"profitstatement"==name?2:3,"nsrsbh":nsrsbh}),params},this.setShowRptStates=function(zgswskfjDm,bbbsqDm,zlbsxlDm){if(zgswskfjDm){var fourfjDm=zgswskfjDm.substr(1,4),twofjDm=zgswskfjDm.substr(1,2);return"ZL1001024"==zlbsxlDm?{"balancesheetStatus":!0,"profitstatementStatus":!0,"cashflowstatementStatus":!0}:"2102"==fourfjDm||"3302"==fourfjDm||"3502"==fourfjDm||"3702"==fourfjDm||"4403"==fourfjDm?{"balancesheetStatus":!0,"profitstatementStatus":!0,"cashflowstatementStatus":!0}:"11"==twofjDm&&"01"!=bbbsqDm?{"balancesheetStatus":!0,"profitstatementStatus":!0,"cashflowstatementStatus":!1}:{"balancesheetStatus":!0,"profitstatementStatus":!0,"cashflowstatementStatus":!0}}},this.renderUpload=function(key){var accountingStandards=(_this.metaAction.gf("data.uploadFile"),_this.metaAction.gf("data.urlData.accountingStandards")||_this.metaAction.gf("data.urlData.accountingStandardsId")),token=_utils.fetch.getAccessToken(),props={"action":location.protocol+"//"+location.host+"/v1/reportconverter/upload?flag="+("balancesheet"==key?1:"profitstatement"==key?2:3)+"&accountingStandards="+accountingStandards+"&token="+token,"showUploadList":!1,"accept":".xls, .xlsx"},originalName=void 0;return"balancesheet"==key?originalName=_this.metaAction.gf("data.balancesheetData")?_this.metaAction.gf("data.balancesheetData.originalName"):"":"profitstatement"==key?originalName=_this.metaAction.gf("data.profitstatementData")?_this.metaAction.gf("data.profitstatementData.originalName"):"":"cashflowstatement"==key&&(originalName=_this.metaAction.gf("data.cashflowstatementData")?_this.metaAction.gf("data.cashflowstatementData.originalName"):""),_react2["default"].createElement("div",{"style":{"display":"flex"}},_react2["default"].createElement("div",{"style":{"color":originalName?"#535252":"#c3c3c3","display":"inline-block","marginLeft":"8px","whiteSpace":"nowrap","border":"1px solid #d9d9d9","width":"330px","height":"38px","background":"#fff"},"title":originalName,"className":"update-balancesheet-item-content-input"},_react2["default"].createElement("span",{"className":"update-balancesheet-item-content-input-text"},originalName?originalName:"\u8bf7\u4e0a\u4f20\u91c7\u96c6\u597d\u7684\u6570\u636e\u6587\u4ef6"),originalName?_react2["default"].createElement(_edfComponent.Icon,{"type":"cuowutishi","fontFamily":"edficon","className":"update-shanchu-icon","onClick":_this.delUpdate(key)}):""),_react2["default"].createElement(_edfComponent.Upload,(0,_extends3["default"])({"onChange":_this.handleOnChange(key)},props,{"beforeUpload":_this.excelbeforeUpload,"style":{"display":"inline-block","width":"100px","height":"38px","marginLeft":"10px","lineHeight":"38px"}}),_react2["default"].createElement(_edfComponent.Button,{"style":{"height":"38px","borderRadius":"0px","lineHeight":"38px","textAlign":"center","display":"inline-block","width":"100%","cursor":"pointer"}},originalName?"\u91cd\u9009\u6587\u4ef6":"\u9009\u62e9\u6587\u4ef6")))},this.excelbeforeUpload=function(file){var isWin="Win32"==navigator.platform||"Windows"==navigator.platform||"MacIntel"==navigator.platform&&navigator.userAgent.toLowerCase().indexOf("chrome")<0;if(isWin){var type=file.type?file.type:"";return"application/vnd.ms-excel"!=type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=type?(_message2["default"].warning("\u4ec5\u652f\u6301\u4e0a\u4f20Excel\u683c\u5f0f\u7684\u6587\u4ef6",5),!1):_this.beforeUpload(file)}},this.beforeUpload=function(file,filetype){var isLt10M=file.size/1024/1024<10;if(file.size&&!isLt10M)return _message2["default"].warning("\u6587\u4ef6\u8fc7\u5927\uff0c\u8bf7\u4e0a\u4f20\u5c0f\u4e8e10MB\u7684\u6587\u4ef6",5),!1},this.delUpdate=function(key){return(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee4(){var res,reduceArr;return _regenerator2["default"].wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:res=_this.webapi.tranreport.deleteDataSource([{"fieldId":_this.metaAction.gf("data."+key+"Data.id"),"fieldName":key}]),res&&(reduceArr=[],"balancesheet"==key?reduceArr.push({"path":"data.balancesheetData","value":void 0}):"profitstatement"==key?reduceArr.push({"path":"data.profitstatementData","value":void 0}):"cashflowstatement"==key&&reduceArr.push({"path":"data.cashflowstatementData","value":void 0}),_this.metaAction.gf("data.balancesheetData")||_this.metaAction.gf("data.profitstatementData")||_this.metaAction.gf("data.cashflowstatementData")||reduceArr.push({"path":"data.btnState.updateState","value":!1}),_this.injections.reduce("updateArr",reduceArr),_message2["default"].success("\u6587\u4ef6\u5220\u9664\u6210\u529f",5));case 2:case"end":return _context4.stop()}},_callee4,_this)}))},this.handleOnChange=function(key){return function(info){_edfComponent.LoadingMask.show(),"done"==info.file.status?(_edfComponent.LoadingMask.hide(),info.file.response.result&&info.file.response.value?(_message2["default"].success("\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",5),_this.injections.reduce("uploadFile",info.file.response.value,key)):_this.uploadResponseWarning([info.file.response.error.message])):"error"===info.file.status&&(_edfComponent.LoadingMask.hide(),_message2["default"].warning("\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25",5))}},this.getUpdatePrompt=function(){var zlbsxlDm=_this.metaAction.gf("data.urlData.zlbsxlDm");return _react2["default"].createElement("div",null,_react2["default"].createElement("p",null,"\u6ce8\uff1a\u76ee\u524d\u652f\u6301\u4f1a\u8ba1\u51c6\u5219\uff08\u9002\u7528\u4e8e\u4e00\u822c\u4f01\u4e1a/\u5546\u4e1a\u94f6\u884c/\u8bc1\u5238\u516c\u53f8/\u4fdd\u9669\u516c\u53f8/\u62c5\u4fdd\u4f01\u4e1a\uff09\u3001\u5c0f\u4f01\u4e1a\u4f1a\u8ba1\u51c6\u5219\u3001\u4e8b\u4e1a\u5355\u4f4d\u4f1a\u8ba1\u5236\u5ea6\u3002"),"ZL1001001"==zlbsxlDm?_react2["default"].createElement("p",null,"\u8bf7\u4e0a\u4f20\u4ece\u8d22\u52a1\u8f6f\u4ef6\u5bfc\u51fa\u7684Excel\u683c\u5f0f\u7684\u8d22\u52a1\u62a5\u8868\uff0c\u53ef\u53ea\u4e0a\u4f20\u4e00\u4e2a\u62a5\u8868\u3002\u8bf7\u786e\u4fdd\u672c\u671f\u91d1\u989d\u662f\u672c\u5e74\u7d2f\u8ba1\u91d1\u989d\uff0c\u4e0a\u671f\u91d1\u989d\u662f\u53bb\u5e74\u540c\u671f\u7d2f\u8ba1\u91d1\u989d\u3002"):"ZL1001003"==zlbsxlDm?_react2["default"].createElement("p",null,"\u8bf7\u4e0a\u4f20\u4ece\u8d22\u52a1\u8f6f\u4ef6\u5bfc\u51fa\u7684Excel\u683c\u5f0f\u7684\u8d22\u52a1\u62a5\u8868\uff0c\u53ef\u53ea\u4e0a\u4f20\u4e00\u4e2a\u62a5\u8868\u3002\u8bf7\u786e\u4fdd\u4e0a\u5e74\u91d1\u989d\u662f\u53bb\u5e74\u5168\u5e74\u7d2f\u8ba1\u91d1\u989d\u3002"):_react2["default"].createElement("p",null,"\u8bf7\u4e0a\u4f20\u4ece\u8d22\u52a1\u8f6f\u4ef6\u5bfc\u51fa\u7684Excel\u683c\u5f0f\u7684\u8d22\u52a1\u62a5\u8868\uff0c\u53ef\u53ea\u4e0a\u4f20\u4e00\u4e2a\u62a5\u8868\u3002\u5e76\u786e\u4fdd\u62a5\u8868\u6570\u636e\u4e0e\u7533\u62a5\u6240\u5c5e\u671f\u4e00\u81f4\u3002"))},this.getDisplayErrorMSg=function(errorMsg,headerRow,footerRow){return _react2["default"].createElement("div",{"style":{"display":"inline-table"}},headerRow?_react2["default"].createElement("div",{"style":{"fontSize":"14px","color":"#2F2F2F","marginBottom":"13px","lineHeight":"18px"}},headerRow,_react2["default"].createElement("br",null)):"",errorMsg.map(function(item,index){return _react2["default"].createElement("div",{"style":{"fontSize":"12px","color":"#484848"}},item,_react2["default"].createElement("br",null))}),"")},this.handleAdjustClick=function(){var btnDom=document.querySelector(".ant-confirm-btns .ant-btn-primary");btnDom&&btnDom.click();var that=_this;window.setTimeout(function(){that.projectAdjustClick(!0)},100)},this.getMessages=function(type){var arr=[];return type?arr.push("\u539f\u8868\u4e0e\u5c40\u7aef\u62a5\u8868\u6709\u4e0d\u4e00\u81f4\u7684\u9879\u76ee\uff0c\u8bf7\u8c03\u6574\u9879\u76ee\u5bf9\u5e94\u5173\u7cfb\u3002\u8c03\u6574\u540e\uff0c\u4ee5\u540e\u5f81\u671f\u53ef\u76f4\u63a5\u5bfc\u5165\u5566"):arr.push("\u62a5\u8868\u683c\u5f0f\u53d1\u751f\u4e86\u53d8\u5316\uff0c\u53d8\u5316\u7684\u90e8\u5206\u4e0e\u5c40\u7aef\u62a5\u8868\u9879\u76ee\u4e0d\u5339\u914d\uff0c\u8bf7\u8c03\u6574\u9879\u76ee\u5bf9\u5e94\u5173\u7cfb\u3002"),arr},this.handleWarningClick=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee5(){var rpt;return _regenerator2["default"].wrap(function(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,_this.nextResponseWarning(_this.getMessages(1));case 2:rpt=_context5.sent;case 4:case"end":return _context5.stop()}},_callee5,_this)})),this.responseWarning=function(){var _ref7=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee6(messages,headerRow,footerRow){var rpt;return _regenerator2["default"].wrap(function(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,_this.metaAction.modal("warning",{
"content":_this.getDisplayErrorMSg(messages,headerRow,footerRow),"okText":"\u786e\u5b9a","className":"tranreport-prompt-modal"});case 2:rpt=_context6.sent;case 4:case"end":return _context6.stop()}},_callee6,_this)}));return function(_x4,_x5,_x6){return _ref7.apply(this,arguments)}}(),this.nextResponseWarning=function(){var _ref8=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee7(messages){var rpt;return _regenerator2["default"].wrap(function(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.next=2,_this.responseWarning(messages,void 0,!0);case 2:return rpt=_context7.sent,_context7.abrupt("return",rpt);case 4:case"end":return _context7.stop()}},_callee7,_this)}));return function(_x7){return _ref8.apply(this,arguments)}}(),this.uploadResponseWarning=function(){var _ref9=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee8(messages){var rpt;return _regenerator2["default"].wrap(function(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:return _context8.next=2,_this.responseWarning(messages,"\u5bfc\u5165\u95ee\u9898\uff1a");case 2:return rpt=_context8.sent,_context8.abrupt("return",rpt);case 4:case"end":return _context8.stop()}},_callee8,_this)}));return function(_x8){return _ref9.apply(this,arguments)}}(),this.generateResponseWarning=function(){var _ref10=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee9(messages){var rpt;return _regenerator2["default"].wrap(function(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:return _context9.next=2,_this.responseWarning(messages,"\u751f\u6210\u95ee\u9898\uff1a");case 2:return rpt=_context9.sent,_context9.abrupt("return",rpt);case 4:case"end":return _context9.stop()}},_callee9,_this)}));return function(_x9){return _ref10.apply(this,arguments)}}(),this.assetOrProjectStyle=function(record){},this.renderCellTextBox=function(columnName,coltitle,v,rowIndex){var list=_this.metaAction.gf("data.source.dataList"),currformula=list.get(rowIndex).get("sum"+_this.indexTitleCase(columnName)),text=list&&"0.00"!=list.get(rowIndex).get(columnName)?list.get(rowIndex).get(columnName):"",editable=""!=list.get(rowIndex).get(columnName)&&(!list.get(rowIndex).get("isSumRow")||!currformula),precision=2,customAttribute=_this.metaAction.gf("data.other.customAttribute"),maxValue=99999999999999.98;return _react2["default"].createElement(EditableCell,{"editable":editable,"value":_utils.number.toFixedLocal(text,precision),"onBlur":function(value){return _this.handleBlur(rowIndex,columnName,value,coltitle,maxValue)},"onEnter":function(e){return _this.handleEnter(e,rowIndex,columnName,coltitle,maxValue)},"toFixedLocal":function(){return _utils.number.toFixedLocal(text,precision)},"precision":precision,"customAttribute":customAttribute})},this.handleBlur=function(rowIndex,columnName,value,coltitle,maxValue){var list=_this.metaAction.gf("data.source.dataList"),oldValue=list.get(rowIndex).get(columnName),newValue=_utils.number.transferData(value,2),colMaxValue="99,999,999,999,999.99";if(newValue&&newValue.indexOf&&newValue.indexOf(",")>-1&&(newValue=newValue.replace(/,/g,"")),newValue>maxValue)return newValue=" "==oldValue?"0.00":" ",list=list.update(rowIndex,function(item){return item=item.set(columnName,newValue)}),_this.metaAction.sf("data.source.dataList",list),void _message2["default"].warning(coltitle+"\u4e0d\u80fd\u5927\u4e8e"+colMaxValue+",\u8bf7\u8c03\u6574",5);if(newValue<-maxValue)return newValue=" "==oldValue?"0.00":" ",list=list.update(rowIndex,function(item){return item=item.set(columnName,newValue)}),_this.metaAction.sf("data.source.dataList",list),void _message2["default"].warning(coltitle+"\u4e0d\u80fd\u5c0f\u4e8e-"+colMaxValue+",\u8bf7\u8c03\u6574",5);if(isNaN(newValue))return void _message2["default"].warning("\u8bf7\u8f93\u5165\u6570\u5b57",5);var reduceArr=[];oldValue!=newValue&&reduceArr.push({"path":"data.other.editStatus","value":!0}),list=list.update(rowIndex,function(item){return item.set(columnName,_utils.number.format(newValue,2))}),reduceArr.push({"path":"data.source.dataList","value":list});var customAttribute=Math.random();reduceArr.push({"path":"data.other.customAttribute","value":customAttribute}),_this.injections.reduce("updateArr",reduceArr),_this.calculateTotalData(rowIndex,columnName)},this.handleEnter=function(e,rowIndex,columnName,coltitle,maxValue){if(13==e.keyCode||"Enter"==e.key||108==e.keyCode){var inputs=_this.getElementsByClassName("ant-input mk-input-number ttk-access-app-tranreport-step2content-tableCellInput"),index=$(inputs).index(e.target),newValue=e.target.value,colMaxValue="99,999,999,999,999.99";if(newValue&&newValue>maxValue)return void _message2["default"].warning(coltitle+"\u4e0d\u80fd\u5927\u4e8e"+colMaxValue+",\u8bf7\u8c03\u6574",5);if(newValue&&newValue<-maxValue)return void _message2["default"].warning(coltitle+"\u4e0d\u80fd\u5c0f\u4e8e-"+colMaxValue+"\uff0c\u8bf7\u8c03\u6574",5);if(newValue&&newValue.indexOf(",")>-1&&(newValue=newValue.replace(/,/g,"")),isNaN(newValue))return void _message2["default"].warning("\u8bf7\u8f93\u5165\u6570\u5b57",5);inputs[index+1].focus()}},this.calculateTotalData=function(rowIndex,columnName){var allFormulaList=_this.metaAction.gf("data.source.allFormulaList"),isMutilColFormula=_this.metaAction.gf("data.source.isMutilColFormula"),currFormulaList=[],parentFormulas=[];if(allFormulaList){var colFormulaName=columnName+"_"+(rowIndex+1);if(currFormulaList=_this.getCurrFormulaList(allFormulaList,columnName),_this.findColNextTotalValue(colFormulaName,(0,_immutable.fromJS)(currFormulaList),columnName,parentFormulas),isMutilColFormula)for(var allColumns=_this.metaAction.gf("data.source.allColumns")?_this.metaAction.gf("data.source.allColumns").toJS():[],index=0;index<parentFormulas.length;index++)for(var element=parentFormulas[index],_rowIndex=0;_rowIndex<allColumns.length;_rowIndex++){var col=allColumns[_rowIndex];if(col!=columnName){currFormulaList=_this.getCurrFormulaList(allFormulaList,col);var parFormulas=[];_this.findColNextTotalValue(element,(0,_immutable.fromJS)(currFormulaList),columnName,parFormulas)}}}var accountingStandards=_this.metaAction.gf("data.urlData.accountingStandards")||_this.metaAction.gf("data.urlData.accountingStandardsId"),curRptType=_this.metaAction.gf("data.other.rpttype"),list=_this.metaAction.gf("data.source.dataList");if("2000020001"==accountingStandards&&"profitStatementRpt"==curRptType)for(var _index=0;_index<parentFormulas.length;_index++){var _element=parentFormulas[_index];if("col1_18"==_element||"col2_18"==_element){var _ret=function(){var _rowIndex=_element.split("_")[1],currentValue=list.get(_rowIndex-1).get(columnName);return list=list.update(_rowIndex,function(item){return item.set(columnName,currentValue)}),list=list.update(19,function(item){return item.set(columnName,"0.00")}),_this.metaAction.sf("data.source.dataList",list),"break"}();if("break"===_ret)break}}},this.findColNextTotalValue=function(formulaName,currFormulaList,columnName,parentFormulas){var totalValue=void 0,list=_this.metaAction.gf("data.source.dataList");parentFormulas.push(formulaName);for(var _loop=function _loop(_rowIndex){var rowData=currFormulaList.get(_rowIndex),colFormula=rowData.get("colFormula"),totalCol=rowData.get("totalCol");if(!colFormula.includes(formulaName)&&!colFormula.includes("?"))return"continue";var col=totalCol&&totalCol.split("_"),key=col[0],value=col[1];if(colFormula.includes("?")){for(var sumListData=rowData.get("sumListData"),isExist=!1,index=0;index<sumListData.size;index++){var element=sumListData.get(index),keyFormula=element.replace(/:/g,"_");totalValue=_this.splitFormula(list,columnName,keyFormula),colFormula=colFormula.replace("{"+index+"}",totalValue),keyFormula.includes(formulaName)&&(isExist=!0)}if(!isExist)return"continue";var condtionResult=eval(colFormula);list=list.update(value-1,function(item){return item.set(key,condtionResult)})}else{if(!_this.isFullReplace(colFormula,formulaName))return"continue";totalValue=_this.splitFormula(list,columnName,colFormula),list=list.update(value-1,function(item){return item.set(key,totalValue)})}_this.metaAction.sf("data.source.dataList",list);var nextFormulaList=currFormulaList["delete"](_rowIndex);return{"v":_this.findColNextTotalValue(totalCol,nextFormulaList,columnName,parentFormulas)}},_rowIndex=0;_rowIndex<currFormulaList.size;_rowIndex++){var _ret2=_loop(_rowIndex);switch(_ret2){case"continue":continue;default:if("object"===("undefined"==typeof _ret2?"undefined":(0,_typeof3["default"])(_ret2)))return _ret2.v}}},this.isFullReplace=function(colFormula,colName){var res=void 0,strCols=colFormula.replace(/\+/g,",").replace(/\-/g,","),minusstrs=strCols.split(",");return res=minusstrs.find(function(element){return element==colName})},this.getCurrFormulaList=function(allFormulaList,columnName){for(var currFormulaList=[],_rowIndex=0;_rowIndex<allFormulaList.size;_rowIndex++){var _rowData=allFormulaList.get(_rowIndex);_rowData.get("totalCol").startsWith(columnName+"_")&&currFormulaList.push(_rowData.toJS())}return currFormulaList},this.indexTitleCase=function(str){return str.toLowerCase().replace(/( |^)[a-z]/g,function(L){return L.toUpperCase()})},this.splitFormula=function(list,columnName,formula){for(var result=0,newTextArr=[],tmpTextArr=void 0,plusStrs=formula.split("+"),i=0;i<plusStrs.length;i++)if(plusStrs[i].indexOf("-")<0){var strs=plusStrs[i].split("_"),colName=strs[0],colIndex=strs[1],plus=_utils.number.transferData(list.get(colIndex-1).get(colName));0==i?newTextArr.push(plus):plus<0?(newTextArr.push("-"),newTextArr.push(Math.abs(plus))):(newTextArr.push("+"),newTextArr.push(plus))}else for(var minusStrs=plusStrs[i].split("-"),j=0;j<minusStrs.length;j++){var _strs=minusStrs[j].split("_"),_colName=_strs[0],_colIndex=_strs[1],minus=_utils.number.transferData(list.get(_colIndex-1).get(_colName));0==j?minus<0?(newTextArr.push("-"),newTextArr.push(Math.abs(minus))):(newTextArr.push("+"),newTextArr.push(minus)):minus<0?(newTextArr.push("+"),newTextArr.push(Math.abs(minus))):(newTextArr.push("-"),newTextArr.push(minus))}tmpTextArr=newTextArr.join("");try{result=eval(tmpTextArr)}catch(exception){console.log(exception)}return _utils.number.format(result,2)},this.rptTypeChange=function(path,value){var rptTitle=_this.metaAction.gf("data.rptTitle").toJS(),params=_this.preSaveData();params&&_this.injections.reduce("setSourceRpt",params,value,rptTitle[value]),_this.metaAction.sf(path,value),setTimeout(function(){_this.onResize()},20)},this.reSelectRptClick=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee10(){var editStatus,params,urlData,res,rptTitle,rpttype;return _regenerator2["default"].wrap(function(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:if(editStatus=_this.metaAction.gf("data.other.editStatus"),!editStatus){_context10.next=12;break}return _context10.next=4,_this.preSaveData();case 4:return params=_context10.sent,urlData=_this.metaAction.gf("data.urlData")&&_this.metaAction.gf("data.urlData").toJS(),urlData["accountingStandardsId"]=_this.metaAction.gf("data.paramExternalDto")&&_this.metaAction.gf("data.paramExternalDto").toJS().accountingStandardsId,params.paramDto=urlData,_context10.next=10,_this.webapi.tranreport.saveReport(params);case 10:res=_context10.sent,res&&_this.metaAction.sf("data.other.editStatus",!1);case 12:rptTitle=_this.metaAction.gf("data.rptTitle").toJS(),rpttype=_this.metaAction.gf("data.other.rpttype"),_hmt&&_hmt.push(["_trackEvent","\u8d22\u52a1","\u62a5\u8868\u8f6c\u6362","\u9009\u62e9\u6587\u4ef6\u662f"+rptTitle[rpttype]+"\u91cd\u4f20Excel"]),_this.injections.reduce("updateArr",[{"path":"data.step.step1Visible","value":!0},{"path":"data.step.step2Visible","value":!1}]);case 15:case"end":return _context10.stop()}},_callee10,_this)})),this.downloadRptClick=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee11(){var params,editStatus,checkReport,urlData,res,checkParams;return _regenerator2["default"].wrap(function(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.next=2,_this.preSaveData();case 2:if(params=_context11.sent,editStatus=_this.metaAction.gf("data.other.editStatus"),checkReport=void 0,urlData=_this.metaAction.gf("data.urlData")&&_this.metaAction.gf("data.urlData").toJS(),urlData["accountingStandardsId"]=_this.metaAction.gf("data.paramExternalDto").toJS().accountingStandardsId,!editStatus){_context11.next=13;break}return params.paramDto=urlData,_context11.next=11,_this.webapi.tranreport.saveReport(params);case 11:res=_context11.sent,res&&_this.metaAction.sf("data.other.editStatus",!1);case 13:return checkParams=(0,_extends3["default"])({"startPeriod":urlData.sssqQ,"endPeriod":urlData.sssqZ,"accountingStandardsId":urlData.accountingStandardsId},urlData),_context11.next=16,_this.webapi.tranreport.downloadRpt(checkParams);case 16:case"end":return _context11.stop()}},_callee11,_this)})),this.projectAdjustClick=function(){var _ref13=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee12(fromPromp){var editStatus,params,urlData,_res2,reportCode,res,rptTitle;return _regenerator2["default"].wrap(function(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:if(editStatus=_this.metaAction.gf("data.other.editStatus"),params=void 0,urlData=void 0,!editStatus){_context12.next=12;break}return _context12.next=4,_this.preSaveData();case 4:return params=_context12.sent,urlData=_this.metaAction.gf("data.urlData")&&_this.metaAction.gf("data.urlData").toJS(),urlData["accountingStandardsId"]=_this.metaAction.gf("data.paramExternalDto").toJS().accountingStandardsId,params.paramDto=urlData,_context12.next=10,_this.webapi.tranreport.saveReport(params);case 10:_res2=_context12.sent,_res2&&_this.metaAction.sf("data.other.editStatus",!1);case 12:return reportCode=_this.metaAction.gf("data.other.rpttype"),_context12.next=15,_this.metaAction.modal("show",{"title":"\u8c03\u6574\u9879\u76ee","width":1009,"bodyStyle":{"height":365},"okText":"\u91cd\u65b0\u8f6c\u6362","wrapClassName":"tranreport-projectadjust-modal","children":_this.metaAction.loadApp("ttk-access-app-tranreport-projectadjust",{"store":_this.component.props.store,"initData":{"tabStatus":{"balancesheetStatus":_this.metaAction.gf("data.other.balancesheetStatus"),"profitstatementStatus":_this.metaAction.gf("data.other.profitstatementStatus"),"cashflowstatementStatus":_this.metaAction.gf("data.other.cashflowstatementStatus")},"params":{"nsrsbh":_this.metaAction.gf("data.urlData.nsrsbh"),"startPeriod":_this.metaAction.gf("data.urlData.sssqQ"),"endPeriod":_this.metaAction.gf("data.urlData.sssqZ"),"accountingStandardsId":_this.metaAction.gf("data.urlData.accountingStandardsId"),"zgswskfjDm":_this.metaAction.gf("data.urlData.zgswskfjDm"),"nsrmc":_this.metaAction.gf("data.urlData.nsrmc")},"fromPromp":"object"!=("undefined"==typeof fromPromp?"undefined":(0,_typeof3["default"])(fromPromp)),"reportCode":reportCode.toLocaleLowerCase().substr(0,reportCode.length-3),"rptTitle":_this.metaAction.gf("data.rptTitle")}})});case 15:res=_context12.sent,res&&(rptTitle=_this.metaAction.gf("data.rptTitle").toJS(),_this.injections.reduce("setSourceRpt",res,reportCode,rptTitle[reportCode]),_message2["default"].success("\u91cd\u65b0\u8f6c\u6362\u6210\u529f\u3002",5),_hmt&&_hmt.push(["_trackEvent","\u8d22\u52a1","\u62a5\u8868\u8f6c\u6362","\u9009\u62e9\u6587\u4ef6\u662f"+rptTitle[reportCode]+"\u8c03\u6574\u9879\u76ee"]));case 17:case"end":return _context12.stop()}},_callee12,_this)}));return function(_x10){return _ref13.apply(this,arguments)}}(),this.generateClick=(0,_asyncToGenerator3["default"])(_regenerator2["default"].mark(function _callee13(){var params,editStatus,checkReport,urlData,res,checkParams,check,res1,confirmUpReport2,rptTitle2,rpttype2,rediretUrl2,confirmUpReport,rptTitle,rpttype,rediretUrl;return _regenerator2["default"].wrap(function(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.next=2,_this.preSaveData();case 2:if(params=_context13.sent,editStatus=_this.metaAction.gf("data.other.editStatus"),checkReport=void 0,urlData=_this.metaAction.gf("data.urlData")&&_this.metaAction.gf("data.urlData").toJS(),urlData["accountingStandardsId"]=_this.metaAction.gf("data.paramExternalDto").toJS().accountingStandardsId,!editStatus){_context13.next=13;break}return params.paramDto=urlData,_context13.next=11,_this.webapi.tranreport.saveReport(params);case 11:res=_context13.sent,res&&_this.metaAction.sf("data.other.editStatus",!1);case 13:if(checkParams=(0,_extends3["default"])({"startPeriod":urlData.sssqQ,"endPeriod":urlData.sssqZ,"accountingStandardsId":urlData.accountingStandardsId},urlData),!checkParams){_context13.next=37;break}return _context13.next=17,_this.webapi.tranreport.checkReport(checkParams);case 17:if(check=_context13.sent,!check||check.checkPass){_context13.next=25;break}return _context13.next=21,_this.metaAction.modal("warning",{"content":_this.getDisplayGenerateErrorMSg(check),"wrapClassName":"tranreport-generate-modal-bg","className":"tranreport-generate-modal","okText":"\u8fd4\u56de\u4fee\u6539"});case 21:return res1=_context13.sent,_context13.abrupt("return");case 25:if(!check||!(check.msgList&&check.msgList.length||check.xjllbList&&check.xjllbList.length||check.lrbList&&check.lrbList.length||check.zcfzbList&&check.zcfzbList.length)){_context13.next=37;break}return _context13.next=28,_this.metaAction.modal("confirm",{"content":_this.getDisplayGenerateErrorMSg(check),"wrapClassName":"tranreport-generate-modal-bg","className":"tranreport-generate-modal tranreport-generate-modal-confirm","cancelText":"\u8fd4\u56de\u4fee\u6539","okText":"\u7ee7\u7eed\u751f\u6210"});case 28:if(confirmUpReport2=_context13.sent,rptTitle2=_this.metaAction.gf("data.rptTitle").toJS(),rpttype2=_this.metaAction.gf("data.other.rpttype"),_hmt&&_hmt.push(["_trackEvent","\u8d22\u52a1","\u62a5\u8868\u8f6c\u6362","\u9009\u62e9\u6587\u4ef6\u662f"+rptTitle2[rpttype2]+"\u8fdb\u884c\u751f\u6210"]),!confirmUpReport2){_context13.next=36;break}return _context13.next=34,_this.webapi.tranreport.getTaxReportUrl(urlData);case 34:rediretUrl2=_context13.sent,rediretUrl2&&_utils.history.redirect(rediretUrl2);case 36:return _context13.abrupt("return");case 37:return _context13.next=39,_this.metaAction.modal("confirm",{"content":_this.getDisplayErrorMSg(["\u786e\u5b9a\u751f\u6210\u7a0e\u52a1\u683c\u5f0f\u7684\u8d22\u52a1\u62a5\u8868\uff0c\u5e76\u8fdb\u5165\u5230\u7533\u62a5\u9875\u9762\uff1f"]),"className":"tranreport-sc-modal"});case 39:if(confirmUpReport=_context13.sent,rptTitle=_this.metaAction.gf("data.rptTitle").toJS(),rpttype=_this.metaAction.gf("data.other.rpttype"),_hmt&&_hmt.push(["_trackEvent","\u8d22\u52a1","\u62a5\u8868\u8f6c\u6362","\u9009\u62e9\u6587\u4ef6\u662f"+rptTitle[rpttype]+"\u8fdb\u884c\u751f\u6210"]),!confirmUpReport){_context13.next=47;break}return _context13.next=45,_this.webapi.tranreport.getTaxReportUrl(urlData);case 45:rediretUrl=_context13.sent,rediretUrl&&_utils.history.redirect(rediretUrl);case 47:case"end":return _context13.stop()}},_callee13,_this)})),this.preSaveData=function(){var targetData=void 0,target=_this.metaAction.gf("data.targetList"),source=_this.metaAction.gf("data.source.dataList"),oldTypeValue=_this.metaAction.gf("data.other.rpttype");if(target&&source){targetData=target.toJS();var sourceData=_this.getSaveList(source.toJS());"balanceSheetRpt"==oldTypeValue?targetData.body.zcfzbBody=sourceData:"profitStatementRpt"==oldTypeValue?targetData.body.lrbBody=sourceData:"cashflowStatementRpt"==oldTypeValue&&(targetData.body.xjllbBody=sourceData)}return targetData?targetData:target&&target.toJS()},this.tableColumns=function(){var accountingStandards=_this.metaAction.gf("data.accountingStandards"),rpttype=_this.metaAction.gf("data.other.rpttype"),headerList=_this.metaAction.gf("data.source.headerList"),res=(0,_renderColumns2["default"])(headerList&&headerList.toJS(),rpttype,accountingStandards,_this.renderCellTextBox,_this.assetOrProjectStyle);return res},this.getDisplayGenerateErrorMSg=function(check){return _react2["default"].createElement("div",{"style":{"display":"block"}},_react2["default"].createElement("div",{"className":"tranreport-generate-modal-header"},"\u6821\u9a8c\u95ee\u9898"),check.zcfzbList&&check.zcfzbList.length?_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content"},_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content-title"},"\u8d44\u4ea7\u8d1f\u503a\u8868"),_this.getItems(check.zcfzbList)):"",check.lrbList&&check.lrbList.length?_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content"},_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content-title"},"\u5229\u6da6\u8868"),_this.getItems(check.lrbList)):"",check.xjllbList&&check.xjllbList.length?_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content"},_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content-title"},"\u73b0\u91d1\u6d41\u91cf\u8868"),_this.getItems(check.xjllbList)):"",check.msgList&&check.msgList.length?_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content"},_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content-title"},"\u8868\u95f4\u52fe\u7a3d\u5173\u7cfb"),_this.getItems(check.msgList)):"")},this.metaAction=option.metaAction,this.extendAction=option.extendAction,this.config=_config2["default"].current,this.webapi=this.config.webapi}return action.prototype.getSaveList=function(list){return list=list.map(function(item){for(var name in item)" "==item[name]&&(item[name]="0.00");return item})},action.prototype.getItems=function(list){var arr=[];return list.map(function(item,index){arr.push(_react2["default"].createElement("div",{"className":"tranreport-generate-modal-content-item"},index+1+"."+item))}),arr},action}(),EditableCell=function(_ref15){var editable=_ref15.editable,value=_ref15.value,_onBlur=_ref15.onBlur,onEnter=_ref15.onEnter,toFixedLocal=(_ref15.onkeydown,_ref15.toFixedLocal),precision=_ref15.precision,customAttribute=_ref15.customAttribute;return _react2["default"].createElement("div",{"style":{"textAlign":"right"}},editable?_react2["default"].createElement(_edfComponent.Input.Number,{"style":{"margin":"-5px 0"},"customAttribute":customAttribute,"className":"ttk-access-app-tranreport-step2content-tableCellInput","id":"ttk-access-app-tranreport-step2content-tableCellInput","onPressEnter":function(e){return onEnter(e)},"value":value?toFixedLocal(value,precision):"","onBlur":function(value){return _onBlur(value)},"regex":"^(-?[0-9]+)(?:\\.[0-9]{1,2})?$"}):_react2["default"].createElement("div",{"id":"ttk-access-app-tranreport-step2content-tableCellInput","className":"ttk-access-app-tranreport-step2content-tableCellInput","title":value},value?toFixedLocal(value,precision):""))};module.exports=exports["default"]},"709":function(module,exports){"use strict";Object.defineProperty(exports,"__esModule",{"value":!0});exports.areaList=[{"n":"\u5317\u4eac\u5e02","cityTowNum":"11","cityFourNum":"1100","type":1},{"n":"\u4e1c\u57ce\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u897f\u57ce\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u5d07\u6587\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u5ba3\u6b66\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u671d\u9633\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u4e30\u53f0\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u77f3\u666f\u5c71\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u6d77\u6dc0\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u95e8\u5934\u6c9f\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u623f\u5c71\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u901a\u5dde\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u987a\u4e49\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u660c\u5e73\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u5927\u5174\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u6000\u67d4\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u5e73\u8c37\u533a","cityTowNum":"11","cityFourNum":"1101","type":1},{"n":"\u5bc6\u4e91\u53bf","cityTowNum":"11","cityFourNum":"1102","type":1},{"n":"\u5ef6\u5e86\u53bf","cityTowNum":"11","cityFourNum":"1102","type":1},{"n":"\u5929\u6d25\u5e02","cityTowNum":"12","cityFourNum":"1200","type":0},{"n":"\u6cb3\u5317\u7701","cityTowNum":"13","cityFourNum":"1300","type":0},{"n":"\u5c71\u897f\u7701","cityTowNum":"14","cityFourNum":"1400","type":0},{"n":"\u5185\u8499\u53e4\u81ea\u6cbb\u533a","cityTowNum":"15","cityFourNum":"1500","type":0},{"n":"\u8fbd\u5b81\u7701","cityTowNum":"21","cityFourNum":"2100","type":0},{"n":"\u5409\u6797\u7701","cityTowNum":"22","cityFourNum":"2200","type":0},{"n":"\u9ed1\u9f99\u6c5f\u7701","cityTowNum":"23","cityFourNum":"2300","type":0},{"n":"\u4e0a\u6d77\u5e02","cityTowNum":"31","cityFourNum":"3100","type":0},{"n":"\u6c5f\u82cf\u7701","cityTowNum":"32","cityFourNum":"3200","type":0},{"n":"\u6d59\u6c5f\u7701","cityTowNum":"33","cityFourNum":"3300","type":0},{"n":"\u5b89\u5fbd\u7701","cityTowNum":"34","cityFourNum":"3400","type":0},{"n":"\u798f\u5efa\u7701","cityTowNum":"35","cityFourNum":"3500","type":0},{"n":"\u6c5f\u897f\u7701","cityTowNum":"36","cityFourNum":"3600","type":0},{"n":"\u5c71\u4e1c\u7701","cityTowNum":"37","cityFourNum":"3700","type":0},{"n":"\u6cb3\u5357\u7701","cityTowNum":"41","cityFourNum":"4100","type":0},{"n":"\u6e56\u5317\u7701","cityTowNum":"42","cityFourNum":"4200","type":0},{"n":"\u6e56\u5357\u7701","cityTowNum":"43","cityFourNum":"4300","type":0},{"n":"\u5e7f\u4e1c\u7701","cityTowNum":"44","cityFourNum":"4400","type":0},{"n":"\u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a","cityTowNum":"45","cityFourNum":"4500","type":0},{"n":"\u6d77\u5357\u7701","cityTowNum":"46","cityFourNum":"4600","type":0},{"n":"\u91cd\u5e86\u5e02","cityTowNum":"50","cityFourNum":"5000","type":0},{"n":"\u56db\u5ddd\u7701","cityTowNum":"51","cityFourNum":"5100","type":0},{"n":"\u8d35\u5dde\u7701","cityTowNum":"52","cityFourNum":"5200","type":0},{"n":"\u4e91\u5357\u7701","cityTowNum":"53","cityFourNum":"5300","type":0},{"n":"\u897f\u85cf\u81ea\u6cbb\u533a","cityTowNum":"54","cityFourNum":"5400","type":0},{"n":"\u9655\u897f\u7701","cityTowNum":"61","cityFourNum":"6100","type":0},{"n":"\u7518\u8083\u7701","cityTowNum":"62","cityFourNum":"6200","type":0},{"n":"\u9752\u6d77\u7701","cityTowNum":"63","cityFourNum":"6300","type":0},{"n":"\u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a","cityTowNum":"64","cityFourNum":"6400","type":0},{"n":"\u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a","cityTowNum":"65","cityFourNum":"6500","type":0},{"n":"\u5927\u8fde\u5e02","cityTowNum":"21","cityFourNum":"2102","type":0},{"n":"\u5b81\u6ce2\u5e02","cityTowNum":"33","cityFourNum":"3302","type":0},{"n":"\u53a6\u95e8\u5e02","cityTowNum":"35","cityFourNum":"3502","type":0},{"n":"\u9752\u5c9b\u5e02","cityTowNum":"37","cityFourNum":"3702","type":0},{"n":"\u6df1\u5733\u5e02","cityTowNum":"44","cityFourNum":"4403","type":0}]},"710":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=void 0;var _dec,_class,_extends2=__webpack_require__(3),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(11),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_possibleConstructorReturn2=__webpack_require__(27),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(26),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(2),_edfMetaEngine=(_interopRequireDefault(_react),__webpack_require__(53)),_index=__webpack_require__(323),_index2=_interopRequireDefault(_index),C=(_dec=(0,_edfMetaEngine.wrapper)(_index2["default"]),_dec(_class=function(_Component){function C(){return(0,_classCallCheck3["default"])(this,C),(0,_possibleConstructorReturn3["default"])(this,_Component.apply(this,arguments))}return(0,_inherits3["default"])(C,_Component),C.prototype.render=function(){return this.props.monkeyKing((0,_extends3["default"])({},this.props,{"path":"root"}))},C}(_react.Component))||_class);exports["default"]=C,module.exports=exports["default"]},"711":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function getGridOption(){return{"details":{"path":"data.list","cellClassName":"app-archives-list-cell","emptyRow":{},"getColNames":function(gf){return[]},"cellIsReadonly":function(cellPosition,path,gf){return!1}}}}function actionCreator(option){return{"gridAction":new _edfComponent.GridDecorator.action((0,_extends3["default"])({},option,{"gridOption":getGridOption()}))}}function reducerCreator(option){return{"gridReducer":new _edfComponent.GridDecorator.reducer((0,_extends3["default"])({},option,{"gridOption":getGridOption()}))}}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(3),_extends3=_interopRequireDefault(_extends2),_edfComponent=__webpack_require__(118);exports["default"]={"actionCreator":actionCreator,"reducerCreator":reducerCreator},module.exports=exports["default"]},"712":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function creator(option){var metaReducer=new _edfMetaEngine.reducer(option),o=new reducer((0,_extends3["default"])({},option,{"metaReducer":metaReducer}));return(0,_extends3["default"])({},metaReducer,o)}Object.defineProperty(exports,"__esModule",{"value":!0});var _extends2=__webpack_require__(3),_extends3=_interopRequireDefault(_extends2),_classCallCheck2=__webpack_require__(11),_classCallCheck3=_interopRequireDefault(_classCallCheck2);exports["default"]=creator;var _immutable=__webpack_require__(23),_edfMetaEngine=__webpack_require__(53),_config=__webpack_require__(225),_config2=_interopRequireDefault(_config),_data=__webpack_require__(322),_moment=__webpack_require__(158),reducer=(_interopRequireDefault(_moment),__webpack_require__(391),function reducer(option){var _this=this;(0,_classCallCheck3["default"])(this,reducer),this.init=function(state,option){var initState=(0,_data.getInitState)();return _this.metaReducer.init(state,initState)},this.load=function(state,urlData,rptTitleList){state=_this.metaReducer.sf(state,"data.accountingStandards",(0,_immutable.fromJS)(urlData&&urlData.kjzdzzDm)),state=_this.metaReducer.sf(state,"data.urlData",(0,_immutable.fromJS)(urlData));var lists=rptTitleList.find(function(element){return element.zlbsxlDm==urlData.zlbsxlDm});return lists?lists.titleList.forEach(function(item){state=_this.metaReducer.sf(state,"data.rptTitle."+item.key,item.value)}):rptTitleList[0].titleList.forEach(function(item){state=_this.metaReducer.sf(state,"data.rptTitle."+item.key,item.value)}),state},this.setRptTitle=function(state,mainTitle,value){return state=_this.metaReducer.sf(state,"data.rptHeader.mainTitle",mainTitle),value&&(state=_this.metaReducer.sf(state,"data.rptHeader.vatTaxpayerNum","\u7eb3\u7a0e\u4eba\u8bc6\u522b\u53f7: "+value.nsrsbh),state=_this.metaReducer.sf(state,"data.rptHeader.fillReportDate","\u586b\u62a5\u65e5\u671f\uff1a"+value.reportDate),state=_this.metaReducer.sf(state,"data.rptHeader.compilingUnit","\u7f16\u5236\u5355\u4f4d\uff1a"+value.nsrmc),state=_this.metaReducer.sf(state,"data.rptHeader.reportperiod","\u62a5\u8868\u5c5e\u671f\uff1a"+value.fromDate+" \u81f3 "+value.toDate),state=_this.metaReducer.sf(state,"data.rptHeader.enterprise",""+value.reportShortName),state=_this.metaReducer.sf(state,"data.rptHeader.subTitle",""+value.accountingStandardDescribe),
state=_this.metaReducer.sf(state,"data.rptHeader.unit","\u5355\u4f4d\uff1a\u5143")),state},this.initTranPeport=function(state,tranReport){return state=_this.metaReducer.sf(state,"data.targetList",(0,_immutable.fromJS)(tranReport))},this.setSourceRpt=function(state,tranReport,type,rptTitle){if(tranReport&&(state=_this.initTranPeport(state,tranReport),tranReport.header&&tranReport.body)){var header=tranReport.header,body=tranReport.body,memo=tranReport.memo;"balanceSheetRpt"==type&&(state=_this.metaReducer.sf(state,"data.source.headerList",(0,_immutable.fromJS)(header.zcfzbHeader?header.zcfzbHeader:"")),state=_this.metaReducer.sf(state,"data.source.dataList",(0,_immutable.fromJS)(body.zcfzbBody?body.zcfzbBody:"")),state=_this.getTableAllFormula(state,(0,_immutable.fromJS)(body.zcfzbBody?body.zcfzbBody:"")),state=_this.setRptTitle(state,rptTitle,memo.zcfzbMemo?memo.zcfzbMemo:"")),"profitStatementRpt"==type&&(state=_this.metaReducer.sf(state,"data.source.headerList",(0,_immutable.fromJS)(header.lrbHeader?header.lrbHeader:"")),state=_this.metaReducer.sf(state,"data.source.dataList",(0,_immutable.fromJS)(body.lrbBody?body.lrbBody:"")),state=_this.getTableAllFormula(state,(0,_immutable.fromJS)(body.lrbBody?body.lrbBody:"")),state=_this.setRptTitle(state,rptTitle,memo.lrbMemo?memo.lrbMemo:"")),"cashflowStatementRpt"==type&&(state=_this.metaReducer.sf(state,"data.source.headerList",(0,_immutable.fromJS)(header.xjllbHeader?header.xjllbHeader:"")),state=_this.metaReducer.sf(state,"data.source.dataList",(0,_immutable.fromJS)(body.xjllbBody?body.xjllbBody:"")),state=_this.getTableAllFormula(state,(0,_immutable.fromJS)(body.xjllbBody?body.xjllbBody:"")),state=_this.setRptTitle(state,rptTitle,memo.xjllbMemo?memo.xjllbMemo:""))}return state},this.getTableAllFormula=function(state,list){var totalFormulaList=[],isMutilCol=void 0,allColumns=[];if(list)for(var _loop=function(_rowIndex){var rowData=list.get(_rowIndex);rowData.get("isSumRow")&&rowData.map(function(item,key){if(key.indexOf("sumCol")>-1){var totalIndex=_rowIndex+1;if(item.indexOf("?")>-1){var totalCol=key.replace("sum","").toLowerCase()+"_"+totalIndex,sumListName=key.replace("sum","sumList"),arrayStrs=rowData.get(sumListName),colFormula=item,sumListData=JSON.parse(arrayStrs.replace('"["',"'[").replace('"]"',"']"));totalFormulaList.push({"totalCol":totalCol,"colFormula":colFormula,"sumListData":sumListData,"totalIndex":totalIndex}),allColumns.push(""+key.replace("sum","").toLowerCase())}else{var tmpFormula=item.split(":"),_totalCol=tmpFormula[0]+"_"+totalIndex,_colFormula=void 0;item.indexOf("_")>-1?(_colFormula=tmpFormula[1],isMutilCol=!0):_colFormula=tmpFormula[0]+"_"+tmpFormula[1].replace(/\+/g,"+"+tmpFormula[0]+"_").replace(/\-/g,"-"+tmpFormula[0]+"_"),totalFormulaList.push({"totalCol":_totalCol,"colFormula":_colFormula,"totalIndex":totalIndex}),allColumns.push(""+tmpFormula[0])}}})},_rowIndex=0;_rowIndex<list.size;_rowIndex++)_loop(_rowIndex);var orderFormulaList=totalFormulaList?(0,_immutable.fromJS)(totalFormulaList).sortBy(function(val,index,obj){return val.get("totalCol")},function(a,b){return a<b?-1:a>b?1:a===b?0:void 0}):"";if(state=_this.metaReducer.sf(state,"data.source.allFormulaList",(0,_immutable.fromJS)(orderFormulaList)),isMutilCol){state=_this.metaReducer.sf(state,"data.source.isMutilColFormula",!0);var orderAllColumns=allColumns?(0,_immutable.Set)(allColumns).sort():"";state=_this.metaReducer.sf(state,"data.source.allColumns",orderAllColumns)}return state},this.tableLoading=function(state,loading){return _this.metaReducer.sf(state,"data.loading",loading)},this.tableData=function(state,value){return state=_this.metaReducer.sf(state,"data.list",(0,_immutable.fromJS)(value&&value.rows))},this.uploadFile=function(state,value,key){return state=_this.metaReducer.sf(state,"data.btnState.updateState",!0),"balancesheet"==key?state=_this.metaReducer.sf(state,"data.balancesheetData",(0,_immutable.fromJS)({"originalName":value.originalName,"id":value.id})):"profitstatement"==key?state=_this.metaReducer.sf(state,"data.profitstatementData",(0,_immutable.fromJS)({"originalName":value.originalName,"id":value.id})):"cashflowstatement"==key&&(state=_this.metaReducer.sf(state,"data.cashflowstatementData",(0,_immutable.fromJS)({"originalName":value.originalName,"id":value.id}))),state},this.updateArr=function(state,arr){return arr.forEach(function(item){state=_this.metaReducer.sf(state,item.path,(0,_immutable.fromJS)(item.value))}),state},this.metaReducer=option.metaReducer,this.config=_config2["default"].current});module.exports=exports["default"]},"713":function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function renderColumns(headerList,rpttype,industry,renderCellTextBox){var columns=initColumnheader(headerList,rpttype,renderCellTextBox);return columns}function initColumnheader(colHeaders,rpttype,renderCellTextBox){var headerColumns=[];return!colHeaders||colHeaders.length<1?headerColumns:(colHeaders.forEach(function(item){var data={"title":item.title,"dataIndex":item.fieldName,"key":item.fieldName};if("str"==item.fieldType?data["render"]=function(text,record,index){return _react2["default"].createElement("span",{"title":text,"className":"celltext"},text)}:data["render"]=function(path,v,_rowIndex){return renderCellTextBox(item.fieldName,item.title,v,_rowIndex)},"balanceSheetRpt"==rpttype&&("str"==item.fieldType?data["width"]="20%":data["width"]="15%"),"profitStatementRpt"==rpttype||"cashflowStatementRpt"==rpttype){colHeaders.length}"\u884c\u6b21"!=item.title&&"\u5e8f\u53f7"!=item.title&&headerColumns.push(data)}),headerColumns)}Object.defineProperty(exports,"__esModule",{"value":!0}),exports["default"]=renderColumns;var _react=__webpack_require__(2),_react2=_interopRequireDefault(_react);module.exports=exports["default"]},"940":function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{"constructor":{"value":ctor,"enumerable":!1,"writable":!0,"configurable":!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},"941":function(module,exports){module.exports=function(arg){return arg&&"object"==typeof arg&&"function"==typeof arg.copy&&"function"==typeof arg.fill&&"function"==typeof arg.readUInt8}}});